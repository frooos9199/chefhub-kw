# ูุธุงู ุงููุตุงุฏูุฉ ูุงูุชุณุฌูู - ChefHub

## ๐ ุงููุญุชููุงุช
- [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
- [ุงููููุงุช ุงูููุดุฃุฉ](#ุงููููุงุช-ุงูููุดุฃุฉ)
- [ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ](#ุงููุธุงุฆู-ุงูุฑุฆูุณูุฉ)
- [ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู](#ุฃูุซูุฉ-ุงูุงุณุชุฎุฏุงู)
- [ุงูุญูุงูุฉ ูุงูุฃูุงู](#ุงูุญูุงูุฉ-ูุงูุฃูุงู)

---

## ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุตุงุฏูุฉ ูุงูู ูุฏุนู ุซูุงุซุฉ ุฃููุงุน ูู ุงููุณุชุฎุฏููู:
- **ุงูุนููุงุก** - ูููููู ุทูุจ ุงูุทุนุงู ูุชูููู ุงูุดููุงุช
- **ุงูุดููุงุช** - ูุญุชุงุฌูู ููุงููุฉ ุงูุฅุฏุงุฑุฉ ูุจู ุงูุจุฏุก
- **ุงูุฃุฏูู** - ุฅุฏุงุฑุฉ ูุงููุฉ ููููุตุฉ

---

## ุงููููุงุช ุงูููุดุฃุฉ

### 1. `/lib/auth.ts`
ุฏูุงู ุงููุตุงุฏูุฉ ุงูุฃุณุงุณูุฉ:
- `registerCustomer()` - ุชุณุฌูู ุนููู ุฌุฏูุฏ
- `registerChef()` - ุชุณุฌูู ุดูู (ูุญุชุงุฌ ููุงููุฉ)
- `registerAdmin()` - ุชุณุฌูู ุฃุฏูู (ูุญุชุงุฌ ููุชุงุญ ุณุฑู)
- `signIn()` - ุชุณุฌูู ุงูุฏุฎูู
- `signOut()` - ุชุณุฌูู ุงูุฎุฑูุฌ
- `resetPassword()` - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- `changePassword()` - ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- `getCurrentUserData()` - ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
- `resendEmailVerification()` - ุฅุนุงุฏุฉ ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุชุญูู

### 2. `/contexts/AuthContext.tsx`
React Context ูููุตุงุฏูุฉ:
- ูุฑุงูุจ ุญุงูุฉ ุงููุตุงุฏูุฉ ูู Firebase Auth
- ูุฑุงูุจ ุชุญุฏูุซุงุช ุจูุงูุงุช ุงููุณุชุฎุฏู ูู Firestore
- ูููุฑ hooks ุณููุฉ ููุงุณุชุฎุฏุงู: `useAuth()`

### 3. `/components/ProtectedRoute.tsx`
ูููู ูุญูุงูุฉ ุงูุตูุญุงุช:
- ูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
- ูุชุญูู ูู ุงูุตูุงุญูุงุช (Role-based)
- ูุชุญูู ูู ุฃู ุงูุญุณุงุจ ูุดุท
- ูุนุฑุถ ุดุงุดุฉ ุชุญููู ุฃุซูุงุก ุงูุชุญูู

### 4. `/app/auth/login/page.tsx`
ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู:
- ุชุตููู ุนุตุฑู ูุฌุฐุงุจ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจู
- ุชุญููู ุชููุงุฆู ุญุณุจ ููุน ุงููุณุชุฎุฏู

### 5. `/app/auth/register/customer/page.tsx`
ุตูุญุฉ ุชุณุฌูู ุนููู ุฌุฏูุฏ:
- ูููุฐุฌ ุจุณูุท ูุณูู
- ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ
- ุฑุณุงูุฉ ูุฌุงุญ ุจุนุฏ ุงูุชุณุฌูู
- ุฅุฑุณุงู ุฑุณุงูุฉ ุชุญูู ุชููุงุฆูุฉ

### 6. `/app/auth/register/chef/page.tsx`
ุตูุญุฉ ุชุณุฌูู ุดูู (ูุชุนุฏุฏุฉ ุงูุฎุทูุงุช):
- **ุงูุฎุทูุฉ 1**: ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
- **ุงูุฎุทูุฉ 2**: ูุนูููุงุช ุงูุฃุนูุงู ูุงูุชุฎุตุตุงุช
- **ุงูุฎุทูุฉ 3**: ุงููุญุงูุธุงุช ูุฑุณูู ุงูุชูุตูู
- ุฑุณุงูุฉ ุชูุถุญ ุงูุงูุชุธุงุฑ ููููุงููุฉ

### 7. `/app/auth/reset-password/page.tsx`
ุตูุญุฉ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ:
- ุฅุฑุณุงู ุฑุงุจุท ุฅุนุงุฏุฉ ุงูุชุนููู ุจุงูุฅูููู
- ุฑุณุงูุฉ ูุฌุงุญ ูุงุถุญุฉ

---

## ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ

### ุชุณุฌูู ุนููู ุฌุฏูุฏ
```typescript
const result = await registerCustomer({
  email: 'customer@email.com',
  password: 'password123',
  fullName: 'ูุญูุฏ ุฃุญูุฏ',
  phoneNumber: '+96512345678'
});

if (result.success) {
  // ุชู ุงูุชุณุฌูู ุจูุฌุงุญ
  // ุชู ุฅุฑุณุงู ุฑุณุงูุฉ ุชุญูู
}
```

### ุชุณุฌูู ุดูู ุฌุฏูุฏ
```typescript
const result = await registerChef({
  email: 'chef@email.com',
  password: 'password123',
  fullName: 'ูุงุทูุฉ ุนูู',
  phoneNumber: '+96512345678',
  whatsappNumber: '+96598765432',
  businessName: 'ูุทุจุฎ ูุงุทูุฉ',
  bio: 'ูุชุฎุตุตุฉ ูู ุงูุญูููุงุช ุงูุดุฑููุฉ',
  specialty: ['ุญูููุงุช ุดุฑููุฉ', 'ูุนุฌูุงุช'],
  availableGovernorates: ['capital', 'hawalli'],
  deliveryFees: {
    capital: 2.0,
    hawalli: 2.5
  }
});

if (result.success) {
  // ุชู ุฅุฑุณุงู ุงูุทูุจ ูููุฑุงุฌุนุฉ
}
```

### ุชุณุฌูู ุงูุฏุฎูู
```typescript
const result = await signIn('user@email.com', 'password123');

if (result.success && result.userData) {
  // ุชุญููู ุญุณุจ ููุน ุงููุณุชุฎุฏู
  if (result.userData.role === 'customer') {
    router.push('/');
  } else if (result.userData.role === 'chef') {
    router.push('/chef/dashboard');
  } else if (result.userData.role === 'admin') {
    router.push('/admin/dashboard');
  }
}
```

### ุงุณุชุฎุฏุงู useAuth Hook
```typescript
'use client';

import { useAuth } from '@/contexts/AuthContext';

function MyComponent() {
  const { 
    user,          // Firebase User
    userData,      // Firestore User Data
    loading,       // ุญุงูุฉ ุงูุชุญููู
    isAuthenticated, // ูู ูุณุฌู ุฏุฎููุ
    isCustomer,    // ูู ุนูููุ
    isChef,        // ูู ุดููุ
    isAdmin        // ูู ุฃุฏููุ
  } = useAuth();

  if (loading) return <div>ุฌุงุฑู ุงูุชุญููู...</div>;

  if (!isAuthenticated) return <div>ูุฑุฌู ุชุณุฌูู ุงูุฏุฎูู</div>;

  return <div>ูุฑุญุจุงู {userData?.name}</div>;
}
```

### ุญูุงูุฉ ุงูุตูุญุงุช
```typescript
'use client';

import { ProtectedRoute } from '@/components/ProtectedRoute';

export default function ChefDashboard() {
  return (
    <ProtectedRoute allowedRoles={['chef']}>
      <div>ููุญุฉ ุชุญูู ุงูุดูู</div>
    </ProtectedRoute>
  );
}
```

---

## ุงูุญูุงูุฉ ูุงูุฃูุงู

### โ ููุฒุงุช ุงูุฃูุงู ุงููุทุจูุฉ:

1. **Firebase Authentication**
   - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุชููุงุฆูุงู
   - ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ุจุดูู ุขูู
   - ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจู

2. **Firestore Security Rules**
   - ุงููุณุชุฎุฏููู ูููููู ูุฑุงุกุฉ ูุนูููุงุชูู ููุท
   - ุงูุดููุงุช ูููููู ุชุนุฏูู ูุญุชูุงูู ููุท
   - ุงูุฃุฏูู ูุฏููู ุตูุงุญูุงุช ูุงููุฉ

3. **Email Verification**
   - ุฅุฑุณุงู ุฑุณุงูุฉ ุชุญูู ุชููุงุฆูุงู ุนูุฏ ุงูุชุณุฌูู
   - ูููู ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑุณุงูุฉ

4. **Role-Based Access Control**
   - ูู ุตูุญุฉ ูุญููุฉ ุจุงูุตูุงุญูุงุช ุงูููุงุณุจุฉ
   - ูุง ูููู ููุนููู ุงููุตูู ูุตูุญุงุช ุงูุดูู ุฃู ุงูุฃุฏูู

5. **Account Status Check**
   - ุงูุชุญูู ูู ุฃู ุงูุญุณุงุจ ูุดุท
   - ุงูุดููุงุช ุงูุฌุฏุฏ ูุญุชุงุฌูู ููุงููุฉ ุงูุฃุฏูู

6. **Password Validation**
   - 6 ุฃุญุฑู ุนูู ุงูุฃูู
   - ุงูุชุญูู ูู ุชุทุงุจู ูููุฉ ุงููุฑูุฑ

---

## ุฑุณุงุฆู ุงูุฎุทุฃ ุจุงูุนุฑุจู

ุฌููุน ุฑุณุงุฆู ุงูุฎุทุฃ ูู Firebase ูุชุฑุฌูุฉ ููุนุฑุจูุฉ:
- `auth/email-already-in-use` โ "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุณุชุฎุฏู ุจุงููุนู"
- `auth/invalid-email` โ "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุงูุญ"
- `auth/weak-password` โ "ูููุฉ ุงููุฑูุฑ ุถุนููุฉ. ูุฌุจ ุฃู ุชููู 6 ุฃุญุฑู ุนูู ุงูุฃูู"
- `auth/user-not-found` โ "ูู ูุชู ุงูุนุซูุฑ ุนูู ุงููุณุชุฎุฏู"
- `auth/wrong-password` โ "ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ"
- ูุบูุฑูุง...

---

## ุงููุฑุงุญู ุงููุงุฏูุฉ

- [ ] ุฅุถุงูุฉ ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ (2FA) ููุฃุฏูู
- [ ] ุชูุนูู ุฅุดุนุงุฑุงุช Firebase Cloud Messaging
- [ ] ุฅุถุงูุฉ ุชุณุฌูู ุงูุฏุฎูู ุจู Google/Apple
- [ ] ุตูุญุฉ ุงูููู ุงูุดุฎุตู ูููุณุชุฎุฏู
- [ ] ุฅุฏุงุฑุฉ ุนูุงููู ุงูุชูุตูู ููุนููุงุก

---

## ููุงุญุธุงุช ูููุฉ

โ๏ธ **ููุดููุงุช ุงูุฌุฏุฏ:**
- ุจุนุฏ ุงูุชุณุฌููุ ูุฌุจ ุงูุชุธุงุฑ ููุงููุฉ ุงูุฅุฏุงุฑุฉ
- ุณุชุตู ุฑุณุงูุฉ ุจุฑูุฏ ุฅููุชุฑููู ุนูุฏ ุงูููุงููุฉ
- ุงููุฏุฉ ุงููุชููุนุฉ: 24-48 ุณุงุนุฉ

โ๏ธ **ููุฃุฏูู:**
- ุงูุชุณุฌูู ูุญุชุงุฌ ููุชุงุญ ุณุฑู ูู `.env.local`
- ุงููุชุบูุฑ: `NEXT_PUBLIC_ADMIN_REGISTRATION_KEY`
- ูุฌุจ ุชุฃููู ูุฐุง ุงูููุชุงุญ ุจุนูุงูุฉ

โ **ุชู ุงูุชูููุฐ ุจูุฌุงุญ:**
- ูุธุงู ุชุณุฌูู ุฏุฎูู ูุงูู
- ูุธุงู ุชุณุฌูู ููุนููุงุก
- ูุธุงู ุชุณุฌูู ููุดููุงุช (3 ุฎุทูุงุช)
- ุญูุงูุฉ ุงูุตูุญุงุช ุจุงูุตูุงุญูุงุช
- ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช ุชููุงุฆูุงู
- ุฑุณุงุฆู ุฎุทุฃ ูุชุฑุฌูุฉ
- ุชุตููู ุนุตุฑู ููุชุฌุงูุจ
